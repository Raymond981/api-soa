<div class="container pt-4">
    <div class="row">
        <div class="col-md-4">
            <div class="card" style="width: 18rem;">
                <img class="card-img-top" src="../../assets/ciudad.jpg" alt="Card image cap" style="height: 8rem;">
                <div class="card-body">
                    <h5 class="card-title">Registra una nueva ciudad</h5>
                    <p class="card-text">Este formulario es para agregar una nueva ciudad como destino.</p>
                    <button class="btn btn-primary" data-toggle="modal" data-target=".boleto">Registrar Ciudad</button>
                </div>
            </div>

        </div>

        <div class="col-md-4">
            <div class="card" style="width: 18rem;">
                <img class="card-img-top" src="../../assets/autobus3.jpg" alt="Card image cap" style="height: 8rem;">
                <div class="card-body">
                    <h5 class="card-title">Registra un autobus</h5>
                    <p class="card-text">Este formulario sirve para registrar un nuevo autobus.</p>
                    <button class="btn btn-primary" data-toggle="modal" data-target=".autobus">Registrar
                        autobus</button>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card" style="width: 18rem;">
                <img class="card-img-top" src="../../assets/autobuses-occ.jpg" alt="Card image cap"
                    style="height: 8rem;">
                <div class="card-body">
                    <h5 class="card-title">Registra un nuevo viaje</h5>
                    <p class="card-text">Este formulario es para agregar un nuevo viaje.</p>
                    <button class="btn btn-primary" data-toggle="modal" data-target=".viaje">Registrar Viaje</button>
                </div>
            </div>

        </div>

        <div class="col-md-4 pt-4">
            <div class="card" style="width: 18rem;">
                <img class="card-img-top" src="../../assets/tickets.jpg" alt="Card image cap" style="height: 8rem;">
                <div class="card-body">
                    <h5 class="card-title">Registra los boletos</h5>
                    <p class="card-text">Este formulario es para registrar los bolegos de cada autobus.</p>
                    <button class="btn btn-primary" data-toggle="modal" data-target=".boletos">Crear boletos</button>
                </div>
            </div>
        </div>

        <div class="col-md-4 pt-4">
            <div class="card" style="width: 18rem;">
                <img class="card-img-top" src="../../assets/autobus2.jpg" alt="Card image cap" style="height: 8rem;">
                <div class="card-body">
                    <h5 class="card-title">Administra tus autobuses</h5>
                    <p class="card-text">Este formulario es para administrar los autobuses.</p>
                    <button class="btn btn-primary" data-toggle="modal" data-target=".admin-autobus">Administrar
                        autobuses</button>
                </div>
            </div>
        </div>

        <div class="col-md-4 pt-4">
            <div class="card" style="width: 18rem;">
                <img class="card-img-top" src="../../assets/viajes.jpg" alt="Card image cap" style="height: 8rem;">
                <div class="card-body">
                    <h5 class="card-title">Administrar tus viajes</h5>
                    <p class="card-text">Este formulario es para administrar viajes de cada autobus.</p>
                    <button class="btn btn-primary" data-toggle="modal" data-target=".admin-viajes">Administrar
                        viajes</button>
                </div>
            </div>
        </div>

    </div>










    <div class="modal fade admin-viajes" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">

                <div *ngIf="ocultarDivBoleto == 0">
                    <table class="table">
                        <thead class="thead-dark">
                            <tr>
                                <th scope="col">Origen</th>
                                <th scope="col">Destino</th>
                                <th scope="col">Clase autobus</th>
                                <th scope="col">Fecha de salida</th>
                                <th scope="col">Hora de salida</th>
                                <th scope="col">Precio</th>
                                <th scope="col">Acción</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let viajes of lista_viajes">
                                <td>{{lista_ciudades[viajes.id_origen-1].ciudad}}</td>
                                <td>{{lista_ciudades[viajes.id_destino-1].ciudad}}</td>
                                <td>{{lista_autobuses[viajes.id_autobus-1].clase}}</td>
                                <td>{{viajes.fecha_de_salida}}</td>
                                <td>{{viajes.hora_de_salida}}</td>
                                <td>$ {{viajes.precio}}</td>
                                <td><button class="btn btn-danger" (click)="eliViaje(viajes.id, viajes.id_autobus)"
                                        data-dismiss="modal">Eliminar viaje</button>
                                    <button class="btn btn-warning"
                                        (click)="obtenerTodoBoleto(viajes.id_autobus, viajes.id)">Ver
                                        boletos</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div *ngIf="ocultarDivBoleto == 1">
                    <div class="container">
                        <h1 class="text-center">Boletos</h1>
                        <div class="row styles">
                            <div class="col-sm-3" *ngFor="let boleto of boletosAutobus; let i = index">
                                <button *ngIf="boleto.vendido == 0" class="button button-style"
                                    (click)="reservarBoleto(boleto.id)" data-toggle="modal"
                                    data-target=".bd-example-modal-lg" disabled>{{i+1}}</button>
                                <button *ngIf="boleto.vendido == 1" class="button button-style2"
                                    (click)="reservarBoleto(boleto.id)" data-toggle="modal"
                                    data-target=".bd-example-modal-lg" disabled>{{i+1}}</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade admin-autobus" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div *ngIf="ocultarDiv == 0">
                    <table class="table">
                        <thead class="thead-dark">
                            <tr>
                                <th scope="col">Clase</th>
                                <th scope="col">Precio Base</th>
                                <th scope="col">Ultimo mantenimiento</th>
                                <th scope="col">Acción</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let autobus of lista_autobuses">
                                <td>{{autobus.clase}} {{autobus.id}}</td>
                                <td>{{autobus.precio_base}}</td>
                                <td>{{autobus.updated_at}}</td>
                                <td><button class="btn btn-danger"
                                        *ngIf="autobus.mantenimiento == 0 && autobus.ocupado == 0"
                                        (click)="hacerMantenimiento(autobus.id)"
                                        data-dismiss="modal">Mantenimiento</button><button class="btn btn-warning"
                                        *ngIf="autobus.mantenimiento == 1 && autobus.ocupado == 0"
                                        (click)="hacerMantenimiento(autobus.id)" data-dismiss="modal">Sacar de
                                        mantenimiento</button>
                                    <button class="btn btn-success" (click)="obtenerBoletosVendidos(autobus.id)">Ver
                                        historial</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div *ngIf="ocultarDiv == 1">
                    <button class="btn btn-danger" (click)="cerrar()">Cerrar</button>
                    <table class="table">
                        <thead class="thead-dark">
                            <tr>
                                <th scope="col">Asiento</th>
                                <th scope="col">Tipo</th>
                                <th scope="col">Nombre</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let boleto of boletosVendidos">
                                <td>{{boleto.asiento}}</td>
                                <td>{{boleto.tipo}}</td>
                                <td>{{boleto.nombre}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div *ngIf="ocultarDiv == 2">
                    <div class="row styles">
                        <div class="col-sm-3" *ngFor="let boleto of boletos; let i = index">
                            <button *ngIf="boleto.vendido == 0" class="button button-style"
                                (click)="reservarBoleto(boleto.id)" data-toggle="modal"
                                data-target=".bd-example-modal-lg">{{i+1}}</button>
                            <button *ngIf="boleto.vendido == 1" class="button button-style2"
                                (click)="reservarBoleto(boleto.id)" data-toggle="modal"
                                data-target=".bd-example-modal-lg" [disabled]="boleto.vendido">{{i+1}}</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade boletos" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <table class="table">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col">Origen</th>
                            <th scope="col">Destino</th>
                            <th scope="col">Acción</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let viajes of lista_viajes">
                            <td>{{lista_ciudades[viajes.id_origen-1].ciudad}}</td>
                            <td>{{lista_ciudades[viajes.id_destino-1].ciudad}}</td>
                            <td><button class="btn btn-success" (click)="hacerBoletos(viajes.id)"
                                    [disabled]="viajes.boletosGenerados" data-dismiss="modal">Generar boletos</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="modal fade boleto" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="container">
                    <form [formGroup]="registrar_boleto">

                        <div class="form-group">
                            <label for="formGroupExampleInput">Ciudad: </label>
                            <input type="text" formControlName="ciudad" class="form-control"
                                placeholder="Nombre de la ciudad">
                        </div>

                        <button class="btn btn-lg btn-block" (click)="registrarBoleto()"
                            data-dismiss="modal">Registrar</button>
                        <br>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade autobus" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="container">
                    <form [formGroup]="registrar_autobus">
                        <div class="form-group">
                            <label for="formGroupExampleInput">Clase: </label>
                            <select formControlName="clase" class="form-control">
                                <option [value]="clase" *ngFor="let clase of clases">{{clase}}</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="formGroupExampleInput">Precio base: </label>
                            <input type="text" formControlName="precio_base" class="form-control"
                                placeholder="Precio base">
                        </div>

                        <div class="form-group">
                            <label for="formGroupExampleInput">Número de asientos: </label>
                            <input type="text" formControlName="num_asientos" class="form-control"
                                placeholder="Número de asientos">
                        </div>

                        <button class="btn btn-lg btn-block" (click)="registrarAutobus()"
                            data-dismiss="modal">Registrar</button>
                        <br>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade viaje" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="container">
                    <form [formGroup]="registrar_viaje">
                        <div class="form-group">
                            <label for="formGroupExampleInput">Autobus: </label>
                            <select formControlName="id_autobus" class="form-control">
                                <option [value]="autobus.id" *ngFor="let autobus of lista_autobuses">{{autobus.clase}}
                                    {{autobus.id}}</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="formGroupExampleInput">Origen: </label>
                            <select formControlName="id_origen" class="form-control">
                                <option [value]="ciudad.id" *ngFor="let ciudad of lista_ciudades">{{ciudad.ciudad}}
                                </option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="formGroupExampleInput">Destino: </label>
                            <select formControlName="id_destino" class="form-control">
                                <option [value]="ciudad.id" *ngFor="let ciudad of lista_ciudades">{{ciudad.ciudad}}
                                </option>
                            </select>
                        </div>


                        <div class="form-group">
                            <label for="formGroupExampleInput">Distancia (KM): </label>
                            <input type="text" formControlName="distancia" class="form-control"
                                placeholder="Distancia (KM)">
                        </div>

                        <div class="form-group">
                            <label for="formGroupExampleInput">Fecha de salida:</label>
                            <input type="date" formControlName="fecha_de_salida" class="form-control"
                                placeholder="Fecha de salida">
                        </div>
                        <div class="form-group">
                            <label for="formGroupExampleInput">Hora de salida:</label>
                            <input type="time" min="18:00" max="21:00" step="3600" formControlName="hora_de_salida"
                                class="form-control">
                        </div>
                        <button class="btn btn-lg btn-block" (click)="registrarViaje()"
                            data-dismiss="modal">Registrar</button>
                        <br>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>